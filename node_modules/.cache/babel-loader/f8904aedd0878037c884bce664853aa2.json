{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alyssajackson/Documents/React_App/seir-224-project-2/react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/alyssajackson/Documents/React_App/seir-224-project-2/react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/alyssajackson/Documents/React_App/seir-224-project-2/react_project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import\"./CSS/Home.css\";import Form from\"./Form\";function Home(props){//setting state\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),driverAlert=_useState2[0],setDriverAlert=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),alert=_useState4[0],setAlert=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showInfo=_useState6[0],setShowInfo=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showRemove=_useState8[0],setShowRemove=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),showDriveRemove=_useState10[0],setShowDriveRemove=_useState10[1];//fetching data from google sheet\nvar pullGoogleSheet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var sheetUrl,res,data,object,dataArr,driverArr,driverData,rideArr,rideData,resolvedDriverArray,resolvedRideArray;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:sheetUrl=\"https://spreadsheets.google.com/feeds/list/1uZdRKonnGEAgksvHTd9g6FKBkiQyzk9vf6u2ec7LEdE/od6/public/values?alt=json\";_context3.next=3;return fetch(sheetUrl);case 3:res=_context3.sent;_context3.next=6;return res.json();case 6:data=_context3.sent;_context3.next=9;return data.feed.entry;case 9:object=_context3.sent;dataArr=object.map(function(obj,index){if(obj.gsx$title.$t===\"Driver\"){return{name:obj.gsx$name.$t,address:obj.gsx$address.$t,title:\"driver\"};}else{return{name:obj.gsx$name.$t,address:obj.gsx$address.$t,title:\"passenger\"};}});driverArr=dataArr.filter(function(driver){return driver.title===\"driver\";});driverData=driverArr.map(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(driver,index){var str,res,json,place;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:str=driver.address.replace(/\\s/g,'+');_context.next=3;return fetch(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(str,\",+CA&key=AIzaSyDJ56l2Y_6K3vN5rH30aKddRVljnEsuR_Y\"));case 3:res=_context.sent;_context.next=6;return res.json();case 6:json=_context.sent;place=json.results[0].geometry.location;return _context.abrupt(\"return\",{name:driver.name,address:driver.address,lat:place.lat,lng:place.lng,assigned:\"unassigned\"});case 9:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}());rideArr=dataArr.filter(function(ride){return ride.title===\"passenger\";});rideData=rideArr.map(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(ride,index){var str,res,json,place;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:str=ride.address.replace(/\\s/g,'+');_context2.next=3;return fetch(\"https://maps.googleapis.com/maps/api/geocode/json?address=\".concat(str,\",+CA&key=AIzaSyDJ56l2Y_6K3vN5rH30aKddRVljnEsuR_Y\"));case 3:res=_context2.sent;_context2.next=6;return res.json();case 6:json=_context2.sent;place=json.results[0].geometry.location;return _context2.abrupt(\"return\",{name:ride.name,address:ride.address,lat:place.lat,lng:place.lng,assign:\"unassigned\"});case 9:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}());_context3.next=17;return Promise.all(driverData);case 17:resolvedDriverArray=_context3.sent;_context3.next=20;return Promise.all(rideData);case 20:resolvedRideArray=_context3.sent;props.setDriverList(resolvedDriverArray);props.setRideList(resolvedRideArray);case 23:case\"end\":return _context3.stop();}}},_callee3);}));return function pullGoogleSheet(){return _ref.apply(this,arguments);};}();//removing item from list \nvar removeDriver=function removeDriver(name){props.driverList.forEach(function(object,index){if(name===object.name){props.driverList.splice(index,1);setDriverAlert(/*#__PURE__*/React.createElement(\"div\",{className:\"alert\"},/*#__PURE__*/React.createElement(\"img\",{className:\"removeIcon\",src:\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"}),/*#__PURE__*/React.createElement(\"p\",null,name,\" has been removed from your map\")));}});};var removeRide=function removeRide(name){props.rideList.forEach(function(object,index){if(name===object.name){props.rideList.splice(index,1);setAlert(/*#__PURE__*/React.createElement(\"div\",{className:\"alert\"},/*#__PURE__*/React.createElement(\"img\",{className:\"removeIcon\",src:\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"}),/*#__PURE__*/React.createElement(\"p\",null,name,\" has been removed from your map\")));}});};//making the driver List and ride List\nvar makeDriverList=props.driverList.map(function(obj,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"listItem\"},showDriveRemove&&/*#__PURE__*/React.createElement(\"img\",{className:\"removeIcon\",onClick:function onClick(){return removeDriver(obj.name);},src:\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"}),/*#__PURE__*/React.createElement(\"li\",{key:index},obj.name,\" - \",obj.address));});var makeRideList=props.rideList.map(function(obj,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"listItem\"},showRemove&&/*#__PURE__*/React.createElement(\"img\",{className:\"removeIcon\",onClick:function onClick(){return removeRide(obj.name);},src:\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"}),/*#__PURE__*/React.createElement(\"li\",{key:index},obj.name,\" - \",obj.address));});return/*#__PURE__*/React.createElement(\"div\",{className:\"information\"},/*#__PURE__*/React.createElement(\"header\",null,/*#__PURE__*/React.createElement(\"h2\",null,\"Carpool \",/*#__PURE__*/React.createElement(\"span\",null,\"coordinator\")),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"img\",{onClick:pullGoogleSheet,className:\"importIcon\",src:\"https://upload.wikimedia.org/wikipedia/commons/4/4d/Font_Awesome_5_solid_file-import.svg\"}),/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(){setShowInfo(!showInfo);},className:\"helpIcon\",src:\"https://cdn1.iconfinder.com/data/icons/education-set-4/512/information-512.png\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"nav\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:\"https://upload.wikimedia.org/wikipedia/commons/e/e6/Home_icon_black.png\"})),/*#__PURE__*/React.createElement(Link,{to:\"/map\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:\"https://upload.wikimedia.org/wikipedia/commons/e/ed/Map_pin_icon.svg\"})),/*#__PURE__*/React.createElement(Link,{to:\"/list\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:\"https://upload.wikimedia.org/wikipedia/commons/4/43/Noun_project_list_icon_1380018_cc.svg\"}))),/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:\"https://upload.wikimedia.org/wikipedia/commons/e/e6/Home_icon_black.png\"}),/*#__PURE__*/React.createElement(\"br\",null),\"Home\"),/*#__PURE__*/React.createElement(Link,{to:\"/map\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:\"https://upload.wikimedia.org/wikipedia/commons/e/ed/Map_pin_icon.svg\"}),/*#__PURE__*/React.createElement(\"br\",null),\"Map\"),/*#__PURE__*/React.createElement(Link,{to:\"/list\"},/*#__PURE__*/React.createElement(\"img\",{className:\"logo\",src:\"https://upload.wikimedia.org/wikipedia/commons/4/43/Noun_project_list_icon_1380018_cc.svg\"}),/*#__PURE__*/React.createElement(\"br\",null),\"Assign\")),showInfo&&/*#__PURE__*/React.createElement(\"div\",{className:\"instructions\",onClick:function onClick(){return setShowInfo(false);}},/*#__PURE__*/React.createElement(\"ol\",null,/*#__PURE__*/React.createElement(\"h4\",null,\"Instructions: \"),/*#__PURE__*/React.createElement(\"li\",null,\"On your home page, add drivers to your driver list and passengers who need a ride to your passenger list\"),/*#__PURE__*/React.createElement(\"li\",null,\"After you submit, check out the map by clicking on the map icon to see where your drivers and passengers are located!\"),/*#__PURE__*/React.createElement(\"li\",null,\"On the map page, click on the red passenger markers to assign them a driver and they should turn blue!\"),/*#__PURE__*/React.createElement(\"li\",null,\"Once you assigned all your passengers a driver and your markers are all blue, click on the list icon to see the assignments\"))),/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"welcome\"},/*#__PURE__*/React.createElement(\"h4\",null,\"A better way to coordinate rides!\")),/*#__PURE__*/React.createElement(Form,{makeDriverList:makeDriverList,makeRideList:makeRideList,driverList:props.driverList,setDriverList:props.setDriverList,rideList:props.rideList,setRideList:props.setRideList,alert:alert,setAlert:setAlert,driverAlert:driverAlert,setDriverAlert:setDriverAlert,setShowDriveRemove:setShowDriveRemove,showDriveRemove:showDriveRemove,showRemove:showRemove,setShowRemove:setShowRemove})),/*#__PURE__*/React.createElement(\"footer\",null,\"\\xA9 Carpool Coordinator 2020\"));}export default Home;","map":{"version":3,"sources":["/Users/alyssajackson/Documents/React_App/seir-224-project-2/react_project/src/Components/Home.js"],"names":["React","useState","useEffect","Link","Form","Home","props","driverAlert","setDriverAlert","alert","setAlert","showInfo","setShowInfo","showRemove","setShowRemove","showDriveRemove","setShowDriveRemove","pullGoogleSheet","sheetUrl","fetch","res","json","data","feed","entry","object","dataArr","map","obj","index","gsx$title","$t","name","gsx$name","address","gsx$address","title","driverArr","filter","driver","driverData","str","replace","place","results","geometry","location","lat","lng","assigned","rideArr","ride","rideData","assign","Promise","all","resolvedDriverArray","resolvedRideArray","setDriverList","setRideList","removeDriver","driverList","forEach","splice","removeRide","rideList","makeDriverList","makeRideList"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport {Link} from \"react-router-dom\"\nimport \"./CSS/Home.css\"\nimport Form from \"./Form\"\n\nfunction Home(props){\n    //setting state\n    const [driverAlert, setDriverAlert] = useState(\"\")\n    const [alert, setAlert] = useState(\"\")\n    const [showInfo, setShowInfo] = useState(false)\n    const [showRemove, setShowRemove] = useState(false)\n    const [showDriveRemove, setShowDriveRemove] = useState(false)\n\n    //fetching data from google sheet\n    const pullGoogleSheet = async() => {\n        let sheetUrl = \"https://spreadsheets.google.com/feeds/list/1uZdRKonnGEAgksvHTd9g6FKBkiQyzk9vf6u2ec7LEdE/od6/public/values?alt=json\"\n        let res = await fetch(sheetUrl)\n        let data = await res.json()\n        let object = await data.feed.entry\n        const dataArr = object.map((obj, index) => {\n            if(obj.gsx$title.$t === \"Driver\"){\n                return {name: obj.gsx$name.$t, address: obj.gsx$address.$t, title: \"driver\"}\n              \n            } else {\n                return {name: obj.gsx$name.$t, address: obj.gsx$address.$t, title: \"passenger\"}\n            }\n        })\n        const driverArr = dataArr.filter((driver)=>{\n            return driver.title === \"driver\"\n        })\n        const driverData = driverArr.map(async(driver, index)=>{\n            let str = driver.address.replace(/\\s/g, '+');\n            let res = await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${str},+CA&key=AIzaSyDJ56l2Y_6K3vN5rH30aKddRVljnEsuR_Y`)\n            let json = await res.json();\n            let place = json.results[0].geometry.location\n            return {name: driver.name, address: driver.address, lat: place.lat, lng: place.lng, assigned:\"unassigned\"}\n        })\n        const rideArr = dataArr.filter((ride)=>{\n            return ride.title === \"passenger\"\n        })\n        const rideData = rideArr.map(async(ride, index)=>{\n            let str = ride.address.replace(/\\s/g, '+');\n            let res = await fetch(`https://maps.googleapis.com/maps/api/geocode/json?address=${str},+CA&key=AIzaSyDJ56l2Y_6K3vN5rH30aKddRVljnEsuR_Y`)\n            let json = await res.json();\n            let place = json.results[0].geometry.location\n            return {name: ride.name, address: ride.address, lat: place.lat, lng: place.lng, assign: \"unassigned\"}\n        })\n        const resolvedDriverArray = await Promise.all(driverData); \n        const resolvedRideArray = await Promise.all(rideData)\n       \n        props.setDriverList(resolvedDriverArray)\n        props.setRideList(resolvedRideArray)\n    }\n    \n    //removing item from list \n    const removeDriver = (name) => {\n        props.driverList.forEach((object, index) => {\n            if(name === object.name){\n                props.driverList.splice(index, 1)\n                setDriverAlert(\n                    <div className=\"alert\">\n                        <img className=\"removeIcon\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"/>\n                        <p>{name} has been removed from your map</p>\n                     </div>\n                )\n            }\n        })\n    }\n    const removeRide = (name) => {\n        props.rideList.forEach((object, index) => {\n            if(name === object.name){\n                props.rideList.splice(index, 1)\n                setAlert(\n                    <div className=\"alert\">\n                        <img className=\"removeIcon\" src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"/>\n                        <p>{name} has been removed from your map</p>\n                    </div>)\n            }\n        })\n\n    }\n\n    \n    //making the driver List and ride List\n    const makeDriverList = props.driverList.map((obj, index) => {\n        return (\n            <div className=\"listItem\">\n                {showDriveRemove && (<img className=\"removeIcon\" onClick ={()=> removeDriver(obj.name)} src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"/>)}\n                <li key={index}>{obj.name} - {obj.address}</li>\n            </div>\n        )\n    })\n    const makeRideList = props.rideList.map((obj, index) => {\n        return (\n            <div className=\"listItem\">\n                {showRemove && (<img className=\"removeIcon\" onClick={()=> removeRide(obj.name)} src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/9/92/Remove_sign_font_awesome.svg/512px-Remove_sign_font_awesome.svg.png\"/>)}\n                <li key={index}>{obj.name} - {obj.address}</li>\n            </div>\n        )\n    })\n\n    return(\n        <div className=\"information\">\n            <header>\n                <h2>Carpool <span>coordinator</span></h2>\n                <div>\n                <img onClick={pullGoogleSheet} className=\"importIcon\" src=\"https://upload.wikimedia.org/wikipedia/commons/4/4d/Font_Awesome_5_solid_file-import.svg\"/>\n                <img onClick={()=>{setShowInfo(!showInfo)}}className=\"helpIcon\" src=\"https://cdn1.iconfinder.com/data/icons/education-set-4/512/information-512.png\"/>\n                </div>\n            </header> \n            <div className=\"nav\">\n                <Link to=\"/\"><img className=\"logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e6/Home_icon_black.png\"/></Link>\n                <Link to=\"/map\"><img className=\"logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/ed/Map_pin_icon.svg\"/></Link>\n                <Link to=\"/list\"><img className=\"logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/4/43/Noun_project_list_icon_1380018_cc.svg\"/></Link>\n            </div> \n            <nav>\n                <Link to=\"/\"><img className=\"logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/e6/Home_icon_black.png\"/><br/>Home</Link>\n                <Link to=\"/map\"><img className=\"logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/e/ed/Map_pin_icon.svg\"/><br/>Map</Link>\n                <Link to=\"/list\"><img className=\"logo\" src=\"https://upload.wikimedia.org/wikipedia/commons/4/43/Noun_project_list_icon_1380018_cc.svg\"/><br/>Assign</Link>\n            </nav>  \n            {showInfo && (<div className=\"instructions\" onClick={()=> setShowInfo(false)}>\n                <ol>\n                <h4>Instructions: </h4>\n                    <li>On your home page, add drivers to your driver list and passengers who need a ride to your passenger list</li>\n                    <li>After you submit, check out the map by clicking on the map icon to see where your drivers and passengers are located!\n                    </li>\n                    <li>On the map page, click on the red passenger markers to assign them a driver and they should turn blue!</li>\n                    <li>Once you assigned all your passengers a driver and your markers are all blue, click on the list icon to see the assignments</li>\n                </ol>\n            </div>)}\n            <main>\n            <div className=\"welcome\">\n                    <h4>A better way to coordinate rides!</h4>\n            </div>\n            <Form makeDriverList={makeDriverList}\n                 makeRideList={makeRideList}\n                 driverList={props.driverList}\n                 setDriverList={props.setDriverList}\n                 rideList={props.rideList}\n                 setRideList={props.setRideList}\n                 alert={alert}\n                 setAlert={setAlert}\n                 driverAlert={driverAlert}\n                 setDriverAlert={setDriverAlert}\n                 setShowDriveRemove={setShowDriveRemove}\n                 showDriveRemove={showDriveRemove}\n                 showRemove={showRemove}\n                 setShowRemove={setShowRemove}/>\n            </main>          \n            <footer>&copy; Carpool Coordinator 2020</footer>\n        </div>\n    )\n}\nexport default Home;"]},"metadata":{},"sourceType":"module"}